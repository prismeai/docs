---
title: "AI Products Installation Prerequisites"
description: "All the prerequisites and configuration steps needed before installing Prisme.ai AI Products"
---

Before initializing Prisme.ai AI Products, you need to ensure that your environment meets all necessary prerequisites and configurations. This guide will walk you through the required services, configuration steps, and verification processes.

## Core Requirements

A fully operational Prisme.ai environment is required, including both open-source and private microservices.

<Tabs>
  <Tab title="Core Services">
    The following microservices must be running:

    - `prismeai-api-gateway`
    - `prismeai-console`
    - `prismeai-pages`
    - `prismeai-workspaces`
    - `prismeai-events`
    - `prismeai-runtime`
  </Tab>
  <Tab title="Apps Services">
    The following Apps microservices must be available:

    - `prismeai-functions`: Executes JavaScript or Python code generated by LLMs or crafted by developers, enabling powerful custom automation.
    - `prismeai-crawler`: Web document indexing
    - `prismeai-searchengine`: Search engine
    - `prismeai-llm`: Optional, only required if **AI Knowledge** is used with local models
    - `prismeai-nlu`: Optional: Required only if NLU-based intents and entity recognition are needed
  </Tab>
</Tabs>

<Info>
  For offline environments, additional prerequisites may be required. Please refer to the [offline environment setup guide](/self-hosting/configuration/products-installation#offline-environments).
</Info>

## Configuration Requirements

Several environment variables must be configured in the **prismeai-runtime** microservice to ensure proper functioning of installed Apps. If your deployment uses custom API ports modified by a container orchestrator or configuration, you'll need to adapt these values accordingly.

<success>
  All of these variables should already be initialized with our standard Helm charts deployment.
</success>

### Environment Variables

<Accordion title="Custom Code">
  ```plaintext
  APP_CONFIG_CustomCode_apiUrl='http://FUNCTIONS_HOST:4000'
  ```

  Where `FUNCTIONS_HOST` refers to the domain from which the `prismeai-runtime` microservice can reach `prismeai-functions`.
</Accordion>

<Accordion title="Collections">
  ```plaintext
  WORKSPACE_CONFIG_collection_mongoURI='mongodb://MONGO_HOST/collections'
  ```

  Where `MONGO_HOST` should be replaced with the host that allows the `prismeai-functions` microservice to connect to MongoDB (e.g., `mongo` if `prismeai-functions` and `mongo` are launched from the same docker-compose).
</Accordion>

<Accordion title="Crawler">
  ```plaintext
  APP_CONFIG_Crawler_apiUrl='http://SEARCHENGINE_HOST:8000'
  ```

  Where `SEARCHENGINE_HOST` is the domain from which `prismeai-runtime` can reach `prismeai-searchengine`.
</Accordion>

<Accordion title="LLM Open-Source">
  ```plaintext
  APP_CONFIG_LLMOpen-Source_apiUrl='http://LLM_HOST:8888'
  ```

  Where `LLM_HOST` is the domain from which `prismeai-runtime` can reach `prismeai-llm`.

  <warning>
  The LLM Open-Source App is only required for using AI Knowledge with open-source models instead of OpenAI.
</warning>
</Accordion>

<Accordion title="NLU">
  ```plaintext
  APP_CONFIG_NLU_apiUrl='http://NLU_HOST:8000'
  ```

  Where `NLU_HOST` is the domain from which `prismeai-runtime` can reach `prismeai-nlu`.

  <Info>
  The NLU App is not required for the operation of AI Products, but provides advanced intent recognition capabilities if needed.
</Info>
</Accordion>

<Accordion title="SendMail">
  ```plaintext
  APP_CONFIG_SendMail_apiKey='a mailgun API key'
  APP_CONFIG_SendMail_region='https://api.eu.mailgun.net/'
  APP_CONFIG_SendMail_domain='the mailgun domain'
  ```

  <Info>
  The SendMail App is currently compatible only with MailGun. It remains optional and is not required for the proper functioning of the AI products.
</Info>
</Accordion>

## Network Requirements

All microservices should be able to communicate with each other within your environment. Ensure that:

- The runtime service can reach all other services (functions, crawler, searchengine, etc.)
- The functions service can reach external package repositories for npm/pip dependencies
- The console service is accessible to administrators

<warning>
  If you're deploying in an offline environment, you'll need to set up local package repositories for npm and pip dependencies.
</warning>

## Hardware Requirements

<CardGroup cols="2">
  <Card title="Minimum Requirements" icon="server">
    - 8 CPU cores
    - 16GB RAM
    - 100GB storage
    - Suitable for testing and small-scale deployments
  </Card>
  <Card title="Recommended Requirements" icon="server">
    - 16\+ CPU cores
    - 32GB\+ RAM
    - 250GB\+ storage
    - Suitable for production deployments
  </Card>
</CardGroup>

<Info>
  Hardware requirements may vary depending on your specific usage patterns, the number of concurrent users, and the amount of data processed.
</Info>

## Storage Recommendations

<Accordion title="Database Storage">
  We recommend using:

  - **MongoDB**: For collections and application state
  - **Redis**: For caching and real-time data
  - **Vector Database**: For storing embeddings (Redis Stack recommended)

  Ensure these databases are properly configured and accessible to the relevant microservices.
</Accordion>

<Accordion title="File Storage">
  For document and file storage, we recommend:

  - **Object Storage**: S3-compatible storage for documents and files
  - **Persistent Volumes**: For configuration and state that needs to persist across restarts

  Make sure appropriate backup strategies are in place for all storage systems.
</Accordion>

## Offline environments

If the installation environment does not have access to internet, ensure that the following prerequisites are always met :

- If using app microservices, prismeai-functions need access to a NPM registry. If the default https://registry.npmjs.org/ is not available, you must configure your own npm registry using NPM_CONFIG_REGISTRY environment variable inside prismeai-functions microservice
  - Depending on your NPM proxy, it might require additional configuration for authentication
- If using internal / self-signed TLS certificates, they must be configured inside almost all microservices to avoid HTTPS errors
  - prismeai-searchengine and prismeai-crawler are Python microservices : once mounted, the certificate file location can be configured with REQUESTS_CA_BUNDLE
    prismeai-llm does not need the custom certificate
  - Every other prismeai-\* services are NodeJS : once mounted, the certificate file location can be configured with NODE_EXTRA_CA_CERTS

# AI Products Initialization Process

Once you've confirmed that all prerequisites have been met, you can proceed with importing the Prisme.ai App Store and associated product workspaces. The initialization process involves importing archives in the correct sequence and verifying functionality after each step.

<Info>
  It's recommended to perform archive imports using a studio account dedicated to this task to avoid cluttering the dashboard of an administrator account with the multiple app workspaces.
</Info>

## Import Process Overview

The initialization process follows a specific sequence of imports, with testing performed after each step:

<Steps>
  <Step title="Import Package 1: Base Apps">
    Import the first archive containing foundational apps required by other components.
  </Step>
  <Step title="Test Base Apps">
    Verify the functionality of apps imported in the first step.
  </Step>
  <Step title="Import Package 2: Extended Base">
    Import the second archive with additional core services.
  </Step>
  <Step title="Test Extended Base Apps">
    Verify the functionality of apps imported in the second step.
  </Step>
  <Step title="Import Package 3: AI Products">
    Import the main AI product workspaces.
  </Step>
  <Step title="Configure AI Products">
    Complete final configuration steps for AI products.
  </Step>
</Steps>

## Importing Archives

To import an archive:

1. Navigate to the platform
2. Hover over the "**Create a workspace**" button
3. Click on the three-dot menu
4. Select "**Import a workspace from an archive**" from the dropdown
5. Select the archive file
6. Wait for the import to complete
7. Refresh the page to view the newly imported workspaces

<warning>
  Each archive can be re-imported to reset all Apps/workspaces it contains, overwriting any modifications made in the studio since the first import.
</warning>

## Package 1: apps-base1.zip

This archive contains foundational apps required by many other components.

### Key Components

<CardGroup cols="2">
  <Card title="Custom Code" icon="code">
    Enables execution of custom JS/Python code

    Requires the **functions** microservice to be online and configured
  </Card>
  <Card title="Prisme.ai API" icon="plug">
    Enables API calls to Prisme.ai from Automations (YAML files)
  </Card>
</CardGroup>

### Verification Tests

After importing the first package, run these tests to verify functionality:

<Accordion title="Testing Custom Code">
  1. Create a test workspace
  2. Install the `Custom Code` App in your test workspace
  3. Create a new function named `hello` with the following code:

  ```js
  import fetch from 'node-fetch';
  const res = await fetch('https://httpbin.org/headers')
  return await res.json();
  ```

  1. Test the function using the green play button
  2. Verify that the `node-fetch` package has been properly installed and that you receive the expected website response without any import or internal errors
</Accordion>

## Package 2: apps-base2.zip

This archive contains extended base applications that build upon the first package.

### Key Components

<CardGroup cols="2">
  <Card title="Collection" icon="database">
    MongoDB integration

    Requires the **Custom Code** App to work correctly
  </Card>
  <Card title="Crawler" icon="spider-web">
    Web page indexing & search engine

    Requires the **crawler** and **searchengine** microservices
  </Card>
  <Card title="NLU" icon="comments">
    NLU engine

    Requires the **nlu** microservice
  </Card>
  <Card title="RedisSearch" icon="magnifying-glass">
    Interface with the redis-stack-server database
  </Card>
</CardGroup>

### Verification Tests

After importing the second package, run these tests to verify functionality:

<Accordion title="Testing Collection">
  1. Open the **PlatformTests** workspace that was created during import
  2. Navigate to the **Collection/TestCollection** automation
  3. Run the automation from the top-right corner play button
  4. Verify that you receive a valid JSON response including a "Toulouse" city object
</Accordion>

<Accordion title="Testing Crawler">
  1. Open the **Crawler/Crawl page** automation and run it with the top-right corner play button
  2. Open the **Activity** tab and regularly reload it until you see **Crawler.notifications event has been fired**
     - If this never occurs, check **prismeai-crawler** container logs (**apps namespace**) to resolve issues
  3. Open the **Crawler/Search page** automation and run it
  4. Verify that you receive the freshly indexed page result
</Accordion>

## Package 3: apps-extended.zip

This final archive contains the main Prisme.ai AI products and is larger than the previous packages.

<warning>
  Since this archive is larger, the import request may time out, and the loading icon might spin indefinitely. However, the process will continue in the background and finish within a few minutes. You can monitor progress by watching the logs of the **workspaces** microservice.
</warning>

The import is complete when you see a log similar to:

```json
{
  "level":30,
  "time":1691420134138,
  "app":"core-prismeai-workspaces",
  "msg":"Terminated bulk import",
  "result":{
    "imported":[...],
    "errors":[...],
    "createdWorkspaceIds":[...],
    "updatedWorkspaceIds":[],
    "publishedApps":[...]
  }
}
```

Several new workspaces should appear when you refresh the page after seeing this log.

## Post-Import Configuration

After successfully importing all three packages, you need to proceed with the [AI Products configuration](/products/ai-products/configuration) to complete the setup process.

## Troubleshooting

If you encounter issues during the initialization process, here are some common problems and their solutions:

<Accordion title="Custom Code Issues">
  Several critical AI products and Apps (including AI Knowledge) are built on Custom Code. If issues arise:

  1. Monitor the logs of the `prismeai-functions` service
  2. Look for these error messages:
     - `Failed npm install`
     - `Dependencies are still being installed from`
     - `Some dependencies are missing`
     - `TimeoutError`
     - `Failed running function`
  3. If a dependency is missing or still being installed after several minutes, re-save the **Custom Code** App for the affected workspace from the studio. This will prompt `prismeai-functions` to restart the installation (`Installing N modules...`).
  4. If the issue concerns functions of an App (indicated by the `app.` prefix in the logs), you'll need to re-publish the App.
</Accordion>

<Accordion title="Import Timeouts">
  If the import process times out or seems stuck:

  1. Check the logs of the `prismeai-workspaces` service to see if the import is still in progress
  2. Wait for the completion message (`Terminated bulk import`) even if the UI appears frozen
  3. Refresh the page after a few minutes to see if new workspaces have appeared
  4. If the import failed, try importing again or check for network issues
</Accordion>

<Accordion title="Microservice Connectivity">
  If tests fail due to connectivity issues:

  1. Ensure all required microservices are running
  2. Verify that the environment variables are correctly set
  3. Check network connectivity between services
  4. Look at the logs of the specific services mentioned in the error messages
</Accordion>

## Next Steps

<CardGroup cols="2">
  <Card title="Create your SecureChat" icon="wand-magic" href="/self-hosting/configuration/ai-securechat">
    Create your AI Secure Chat
  </Card>
  <Card title="AI Store" icon="shop" href="/self-hosting/configuration/ai-store">
    Learn how to manage and deploy agents in the Store
  </Card>
  <Card title="AI Knowledge" icon="book" href="/self-hosting/configuration/ai-knowledge">
    Organize collections and document-based agents
  </Card>
  <Card title="Create an agent" icon="wand-magic" href="/create-agents/overview">
    Learn more about agent creation
  </Card>
</CardGroup>